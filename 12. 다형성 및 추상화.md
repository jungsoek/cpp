# 12. λ‹¤ν•μ„± λ° μ¶”μƒν™”

## μ •μ  λ°”μΈλ”© vs λ™μ  λ°”μΈλ”©

(Static Binding vs Dynamic Binding) π―π”

C++μ—μ„ **λ°”μΈλ”©(binding)**μ€ **ν•¨μ νΈμ¶μ΄ μ–΄λ–¤ μ‹¤μ  μ½”λ“μ™€ μ—°κ²°λ μ§€λ¥Ό κ²°μ •ν•λ” μ‹μ **μ„ μλ―Έν•λ‹¤.
 μ΄ μ—°κ²°μ΄ **μ»΄νμΌ νƒ€μ„μ— κ²°μ •λλ©΄ μ •μ  λ°”μΈλ”©**,
 **μ‹¤ν–‰ μ‹κ°„(runtime)μ— κ²°μ •λλ©΄ λ™μ  λ°”μΈλ”©**μ΄λΌκ³  ν•λ‹¤.

### β… μ •μ  λ°”μΈλ”© (Static Binding)

#### π“ μ •μ

- **μ»΄νμΌ μ‹κ°„μ— νΈμ¶ν•  ν•¨μκ°€ κ²°μ •λ¨**
- κΈ°λ³Έμ μΌλ΅ **λ¨λ“  λΉ„κ°€μƒ ν•¨μ(non-virtual function)**λ” μ •μ  λ°”μΈλ”©λ¨

#### π“ μμ‹

```
class Animal {
public:
    void speak() { std::cout << "Animal\n"; }
};

class Dog : public Animal {
public:
    void speak() { std::cout << "Dog\n"; }
};

Animal* a = new Dog();
a->speak();  // μ¶λ ¥: Animal (μ •μ  λ°”μΈλ”©)
```

- `speak()`λ” `Animal` νƒ€μ…μ ν¬μΈν„°λ΅ νΈμ¶λ¨ β†’ **μ»΄νμΌλ¬κ°€ Animal::speak νΈμ¶λ΅ κ³ μ •**

#### π“ νΉμ§• μ”μ•½

| ν•­λ©        | μ •μ  λ°”μΈλ”©                      |
| ----------- | -------------------------------- |
| κ²°μ • μ‹μ    | μ»΄νμΌ νƒ€μ„                      |
| μ„±λ¥        | λΉ λ¦„ (ν•¨μ μ£Όμ†κ°€ κ³ μ •λ¨)        |
| μ μ—°μ„±      | λ‚®μ (μ •μλ νƒ€μ… κΈ°μ¤€μΌλ΅ κ³ μ •) |
| κ΄€λ ¨ ν‚¤μ›λ“ | μ—†μ (κΈ°λ³Έ λ™μ‘)                 |
| μ μ© λ€μƒ   | μΌλ° ν•¨μ, λΉ„κ°€μƒ λ©¤λ²„ ν•¨μ λ“±   |

### β… λ™μ  λ°”μΈλ”© (Dynamic Binding)

#### π“ μ •μ

- **μ‹¤ν–‰ μ‹κ°„μ— μ–΄λ–¤ ν•¨μκ°€ νΈμ¶λ μ§€ κ²°μ •**
- λ°λ“μ‹ **`virtual` ν•¨μ**λ΅ μ„ μ–Έλμ–΄μ•Ό λ™μ  λ°”μΈλ”©μ΄ μ μ©λ¨
- **κ°μ²΄μ μ‹¤μ  νƒ€μ…(runtime type)**μ— λ”°λΌ μ¬λ°”λ¥Έ ν•¨μ νΈμ¶

#### π“ μμ‹

```
class Animal {
public:
    virtual void speak() { std::cout << "Animal\n"; }
};

class Dog : public Animal {
public:
    void speak() override { std::cout << "Dog\n"; }
};

Animal* a = new Dog();
a->speak();  // μ¶λ ¥: Dog (λ™μ  λ°”μΈλ”©)
```

- `virtual`λ΅ μ„ μ–Έλ ν•¨μ β†’ κ°€μƒ ν…μ΄λΈ”(virtual table, vtable)μ„ ν†µν•΄ **λ°νƒ€μ„μ— ν•¨μ κ²°μ •**

#### π“ νΉμ§• μ”μ•½

| ν•­λ©        | λ™μ  λ°”μΈλ”©                         |
| ----------- | ----------------------------------- |
| κ²°μ • μ‹μ    | μ‹¤ν–‰ μ‹κ°„(runtime)                  |
| μ„±λ¥        | λ‹¤μ† λλ¦Ό (vtable lookup λΉ„μ© μμ) |
| μ μ—°μ„±      | λ†’μ (λ‹¤ν•μ„± κµ¬ν„ κ°€λ¥)             |
| κ΄€λ ¨ ν‚¤μ›λ“ | `virtual`, `override`, `final` λ“±   |
| μ μ© λ€μƒ   | κ°€μƒ λ©¤λ²„ ν•¨μ, μΈν„°νμ΄μ¤ ν•¨μ λ“±  |

### π“ κ°€μƒ ν•¨μ ν‘ (vtable)μ™€ λ™μ  λ°”μΈλ”©

- ν΄λμ¤κ°€ `virtual` ν•¨μλ¥Ό ν•λ‚λΌλ„ κ°€μ§€λ©΄, **vtable(κ°€μƒ ν•¨μ ν…μ΄λΈ”)**μ΄ μƒμ„±λ¨
- κ°μ²΄λ” **vptr(κ°€μƒ ν•¨μ ν¬μΈν„°)**λ¥Ό ν†µν•΄ vtableμ„ μ°Έμ΅°
- λ™μ  λ°”μΈλ”©μ€ μ΄ vtableμ„ λ”°λΌκ°€λ©΄μ„ λ°νƒ€μ„μ— ν•¨μ μ£Όμ†λ¥Ό μ°Ύλ”λ‹¤

### π“ λΉ„κµ μ •λ¦¬ν‘

| ν•­λ©             | μ •μ  λ°”μΈλ”©               | λ™μ  λ°”μΈλ”©                      |
| ---------------- | ------------------------- | -------------------------------- |
| ν•¨μ κ²°μ • μ‹μ    | μ»΄νμΌ νƒ€μ„               | μ‹¤ν–‰ μ‹κ°„ (λ°νƒ€μ„)               |
| ν‚¤μ›λ“ ν•„μ” μ—¬λ¶€ | β ν•„μ” μ—†μ               | β… `virtual` ν•„μ                 |
| λ‹¤ν•μ„± μ§€μ›      | β λ¶κ°€                    | β… κ°€λ¥                           |
| μ„±λ¥             | λΉ λ¦„ (κ³ μ • μ£Όμ†)          | μ•½κ°„ λλ¦Ό (vtable νƒμƒ‰ λΉ„μ©)     |
| μμ‹ ν•¨μ μ ν•   | μΌλ° ν•¨μ, μ •μ  ν•¨μ      | κ°€μƒ ν•¨μ (`virtual`)            |
| μ•μ „ν• μ‚­μ  μ§€μ› | β κ°€μƒ μ†λ©Έμ μ—†μΌλ©΄ μ„ν— | β… κ°€μƒ μ†λ©Έμ ν•„μλ΅ μ¬λ°”λ¥Έ νκ΄΄ |

### β… κ²°λ΅ 

> - **μ •μ  λ°”μΈλ”©**μ€ μ„±λ¥μ΄ λ›°μ–΄λ‚κ³  λ‹¨μν• κµ¬μ΅°μ— μ ν•©ν•μ§€λ§,
> - **λ™μ  λ°”μΈλ”©**μ€ λ‹¤ν•μ„±κ³Ό μ μ—°ν• μ„¤κ³„λ¥Ό κ°€λ¥ν•κ² ν•λ©°,
>    μƒμ†κ³Ό ν¬μΈν„°λ¥Ό ν†µν• ν•¨μ νΈμ¶μ΄ **μ‹¤μ  κ°μ²΄ νƒ€μ…μ— λ”°λΌ μ •ν™•ν λ™μ‘ν•λ„λ΅ λ³΄μ¥**ν•΄μ¤€λ‹¤.
>
> μ‹¤μ „μ—μ„λ” λ‹¤μκ³Ό κ°™μ΄ κµ¬λ¶„ν•΄μ„ μ‚¬μ©ν•λ‹¤:

| μƒν™©                           | κ¶μ¥ λ°©μ‹                               |
| ------------------------------ | --------------------------------------- |
| λΉ λ¥Έ μ‹¤ν–‰, λ…ν™•ν• νƒ€μ… μ„¤κ³„    | μ •μ  λ°”μΈλ”©                             |
| λ‹¤ν•μ  μΈν„°νμ΄μ¤, κ³µν†µ API    | λ™μ  λ°”μΈλ”©                             |
| κ³µν†µ λ² μ΄μ¤ ν¬μΈν„°λ΅ νκ΄΄ ν•„μ” | λ™μ  λ°”μΈλ”© (`virtual destructor`) ν•„μ |

### β… μ”μ•½

**μ •μ  λ°”μΈλ”© = λΉ λ¥΄μ§€λ§ μ μ—°μ„± λ‚®μ**
**λ™μ  λ°”μΈλ”© = μ μ—°ν•μ§€λ§ vtable λΉ„μ© μμ**

**κ°μ²΄μ μ‹¤μ  λ™μ‘μ„ λ°”νƒ•μΌλ΅ μ •ν™•ν• νΈμ¶μ΄ ν•„μ”ν•λ‹¤λ©΄ λ°λ“μ‹ `virtual`μ„ μ¨μ•Ό ν•λ‹¤.**

## κ°€μƒ ν•¨μ λ° vtable κ°λ…

**κ°€μƒ ν•¨μ(virtual function)**λ” C++μ—μ„ **λ‹¤ν•μ„±(polymorphism)**μ„ κµ¬ν„ν•λ” ν•µμ‹¬ λ©”μ»¤λ‹μ¦μ΄λ‹¤.
 μ—¬κΈ°μ— μ‚¬μ©λλ” **vtable(virtual table)**κ³Ό **vptr(virtual pointer)**μ€ κ·Έ λ™μ‘μ„ **λ°νƒ€μ„μ— μ—°κ²°**ν•  μ μλ„λ΅ ν•΄μ¤€λ‹¤.

> ν•µμ‹¬ λ©ν‘: **"κΈ°λ° ν΄λμ¤ ν¬μΈν„°λ΅ νμƒ ν΄λμ¤ κ°μ²΄λ¥Ό νΈμ¶ν•΄λ„, μ‹¤μ  κ°μ²΄μ— λ§λ” ν•¨μκ°€ μ‹¤ν–‰λκ² ν•λΌ."**

### β… κ°€μƒ ν•¨μλ€?

- `virtual` ν‚¤μ›λ“λ΅ μ„ μ–Έλ ν•¨μ
- **νμƒ ν΄λμ¤μ—μ„ μ¬μ •μ(override)** κ°€λ¥
- **κΈ°λ° ν΄λμ¤ ν¬μΈν„°λ‚ μ°Έμ΅°λ΅ νΈμ¶ν•΄λ„ μ‹¤μ  κ°μ²΄μ ν•¨μκ°€ μ‹¤ν–‰λ¨**

#### π“ μμ 

```
class Animal {
public:
    virtual void speak() { std::cout << "Animal\n"; }
};

class Dog : public Animal {
public:
    void speak() override { std::cout << "Dog\n"; }
};

Animal* a = new Dog();
a->speak();  // μ¶λ ¥: Dog
```

> λ§μ•½ `speak()`κ°€ `virtual`μ΄ μ•„λ‹μ—λ‹¤λ©΄ `Animal::speak()`κ°€ νΈμ¶λμ—μ„ κ²ƒ.

### β… vtable (Virtual Table)

- **ν΄λμ¤ λ‹¨μ„λ΅ ν•λ‚ μƒμ„±λλ” κ°€μƒ ν•¨μ ν…μ΄λΈ”**
- ν•΄λ‹Ή ν΄λμ¤μ **κ°€μƒ ν•¨μλ“¤μ ν•¨μ ν¬μΈν„°λ“¤μ„ μ €μ¥**
- **μ»΄νμΌλ¬μ— μν•΄ μλ™ μƒμ„±λκ³  κ΄€λ¦¬λ¨**

### β… vptr (Virtual Pointer)

- κ° **κ°μ²΄ μΈμ¤ν„΄μ¤ λ‚΄λ¶€μ— μ¨κ²¨μ§„ ν¬μΈν„°**
- μ΄ ν¬μΈν„°λ” κ°μ²΄μ **vtableμ„ κ°€λ¦¬ν‚΄**
- κ°μ²΄ μƒμ„± μ‹ μλ™μΌλ΅ μ„¤μ •λ¨

### β… μ‘λ™ μ›λ¦¬ μ”μ•½

1. `Animal`μ— `virtual void speak()` μ„ μ–Έλ¨ β†’ μ»΄νμΌλ¬κ°€ `Animal_vtable` μƒμ„±
2. `Dog`μ—μ„ `speak()`λ¥Ό override β†’ `Dog_vtable` μƒμ„±, `speak()` ν¬μΈν„° κ°±μ‹ 
3. `Animal* a = new Dog();` β†’ `a` κ°μ²΄ μ•μ— `vptr`μ€ `Dog_vtable`μ„ κ°€λ¦¬ν‚΄
4. `a->speak()` νΈμ¶ μ‹ β†’ `vptr`μ„ λ”°λΌ `Dog::speak()` μ‹¤ν–‰λ¨

### π“ κ°€μƒ ν•¨μ ν…μ΄λΈ” μ‹κ° μ

```
class Base {
public:
    virtual void foo();
    virtual void bar();
};

class Derived : public Base {
public:
    void foo() override;
};
```

| ν΄λμ¤    | vtable                        |
| --------- | ----------------------------- |
| `Base`    | `&Base::foo`, `&Base::bar`    |
| `Derived` | `&Derived::foo`, `&Base::bar` |

### β… κ°€μƒ ν•¨μμ™€ λ‹¤ν•μ„±

- **κΈ°λ° ν΄λμ¤ ν¬μΈν„°λ¥Ό ν†µν•΄ νμƒ ν΄λμ¤μ μ¤λ²„λΌμ΄λ“ ν•¨μ μ‹¤ν–‰ κ°€λ¥**
- μ΄λ” **λ™μ  λ°”μΈλ”©(Dynamic Binding)**μ„ ν†µν•΄ κµ¬ν„λ¨
- `virtual`μ΄ μ—†μΌλ©΄ **μ •μ  λ°”μΈλ”©(Static Binding)** λ°μƒ

### π“ μμ κ°€μƒ ν•¨μ (`= 0`)

```
class Shape {
public:
    virtual void draw() = 0;  // μμ κ°€μƒ ν•¨μ
};
```

- **μΈν„°νμ΄μ¤ μ—­ν• **μ„ ν•λ©°, ν•΄λ‹Ή ν΄λμ¤λ” **μ¶”μƒ ν΄λμ¤**κ°€ λ¨
- μ¤μ§ νμƒ ν΄λμ¤μ—μ„λ§ μ™„μ„± κ°€λ¥

### π“ μ •λ¦¬ν‘

| ν•­λ©       | μ„¤λ…                                                         |
| ---------- | ------------------------------------------------------------ |
| `virtual`  | κ°€μƒ ν•¨μ μ„ μ–Έ ν‚¤μ›λ“                                        |
| `override` | νμƒ ν΄λμ¤μ—μ„ μ¬μ •μν•  λ• λ…μ‹ (C++11 μ΄μƒ)                |
| `vtable`   | ν΄λμ¤μ κ°€μƒ ν•¨μ λ©λ΅ ν…μ΄λΈ” (ν•¨μ ν¬μΈν„° λ°°μ—΄)            |
| `vptr`     | κ° κ°μ²΄κ°€ λ‚΄λ¶€μ— κ°€μ§€λ” μ¨κ²¨μ§„ ν¬μΈν„° (μκΈ° ν΄λμ¤μ vtable κ°€λ¦¬ν‚΄) |
| νΈμ¶ λ°©μ‹  | λ°νƒ€μ„μ— `vptr β†’ vtable` λ”°λΌ νΈμ¶λ¨ β†’ λ™μ  λ°”μΈλ”©           |
| λΉ„μ©       | ν•¨μ νΈμ¶λ³΄λ‹¤ μ•½κ°„ λλ¦Ό (1λ‹¨κ³„ ν¬μΈν„° νƒμƒ‰ μ¶”κ°€)             |

### β… κ²°λ΅ 

> **κ°€μƒ ν•¨μλ” λ‹¤ν•μ„±μ„ κµ¬ν„ν•λ” ν•µμ‹¬ μλ‹¨**μ΄λ©°,
>  vtableκ³Ό vptrμ€ μ΄λ¥Ό **λ°νƒ€μ„μ—μ„ μ•μ „ν•κ³  μλ™μΌλ΅ μν–‰ν•κΈ° μ„ν• κΈ°μ μ  μ¥μΉ**λ‹¤.
>
> μ΄λ¥Ό ν†µν•΄ C++μ€ κ°μ²΄μ μ‹¤μ  νƒ€μ…μ— λ§λ” λ™μ‘μ„ λ³΄μ¥ν•λ©°,
>  **ν”λ¬κ·ΈμΈ μ‹μ¤ν…, μ¶”μƒν™”λ μΈν„°νμ΄μ¤, μ „λµ ν¨ν„΄, λ©”μ‹μ§€ λ””μ¤ν¨μΉ** λ“±μ— κ°•λ ¥ν• κΈ°λ°μ„ μ κ³µν•λ‹¤.

> μ‹¤μ „μ—μ„λ” **κΈ°λ° ν΄λμ¤κ°€ virtual ν•¨μλ¥Ό κ°–λ” κ²½μ°, λ°λ“μ‹ μ†λ©Έμλ„ `virtual`λ΅ μ„ μ–Έν•΄μ•Ό** ν•λ‹¤.
>  κ·Έλ ‡μ§€ μ•μΌλ©΄ **μ†λ©Έ μ‹ λ¦¬μ†μ¤ λ„μμ™€ μ •μλμ§€ μ•μ€ λ™μ‘μ΄ λ°μƒν•  μ μλ‹¤.**

## μμ κ°€μƒ ν•¨μ

C++μ—μ„ **μμ κ°€μƒ ν•¨μ(pure virtual function)**λ” **κµ¬ν„ μ—†μ΄ μ„ μ–Έλ§ μ΅΄μ¬ν•λ” κ°€μƒ ν•¨μ**λ‹¤.
 ν•΄λ‹Ή ν•¨μλ¥Ό ν¬ν•¨ν• ν΄λμ¤λ” **μ¶”μƒ ν΄λμ¤(abstract class)**κ°€ λλ©°,
 **μ§μ ‘ μΈμ¤ν„΄μ¤ν™”ν•  μ μ—†κ³ , λ°λ“μ‹ νμƒ ν΄λμ¤μ—μ„ μ¤λ²„λΌμ΄λ”©ν•μ—¬ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.**

### β… λ¬Έλ²•

```
class Interface {
public:
    virtual void draw() = 0;  // μμ κ°€μƒ ν•¨μ
};
```

- `= 0`μ΄ λ¶™μ€ `virtual` ν•¨μκ°€ μμ κ°€μƒ ν•¨μ
- μ»΄νμΌλ¬λ” μ΄ ν•¨μλ¥Ό **μ •μν•μ§€ μ•κ³  νΈμ¶ν•λ©΄ μ¤λ¥λ΅ κ°„μ£Ό**

### β… νΉμ§• μ”μ•½

| ν•­λ©              | μ„¤λ…                                             |
| ----------------- | ------------------------------------------------ |
| μ •μ μ„μΉ         | ν΄λμ¤ λ‚΄λ¶€μ—μ„ `= 0`μΌλ΅ μ„ μ–Έ                   |
| ν•¨μ λ³Έλ¬Έ         | μ—†μ (μ •μ λ¶κ°€, μ •μν•λ©΄ μΌλ° κ°€μƒ ν•¨μ)        |
| μΈμ¤ν„΄μ¤ν™” κ°€λ¥μ„± | β λ¶κ°€ (μ¶”μƒ ν΄λμ¤λ” μ§μ ‘ κ°μ²΄ μƒμ„± λ¶κ°€)       |
| μ¤λ²„λΌμ΄λ”© ν•„μ   | β… νμƒ ν΄λμ¤μ—μ„ λ°λ“μ‹ κµ¬ν„ν•΄μ•Ό μ‚¬μ© κ°€λ¥      |
| μΈν„°νμ΄μ¤ μ—­ν•    | β… λ‹¤ν•μ  ν”„λ΅κ·Έλλ°μ—μ„ μΈν„°νμ΄μ¤ μ„¤κ³„μ— μ‚¬μ©λ¨ |

### β… μμ : μμ κ°€μƒ ν•¨μμ™€ μ¶”μƒ ν΄λμ¤

```
class Shape {
public:
    virtual void draw() = 0;  // μμ κ°€μƒ ν•¨μ
};

```

```
class Circle : public Shape {
public:
    void draw() override {
        std::cout << "Drawing Circle\n";
    }
};
```

```
Shape* s = new Circle();
s->draw();  // μ¶λ ¥: Drawing Circle
```

> λ§μ•½ `Circle`μ΄ `draw()`λ¥Ό κµ¬ν„ν•μ§€ μ•μ•λ‹¤λ©΄ β†’ μ»΄νμΌ μ—λ¬
>  β†’ `Circle`λ„ μ¶”μƒ ν΄λμ¤κ°€ λμ–΄λ²„λ¦Ό

### β… μμ κ°€μƒ μ†λ©Έμλ„ κ°€λ¥

```
class Base {
public:
    virtual ~Base() = 0;  // μμ κ°€μƒ μ†λ©Έμ
};

Base::~Base() {
    std::cout << "Base destructor\n";
}
```

- μμ κ°€μƒ μ†λ©Έμλ” λ°λ“μ‹ **μ •μκ°€ μμ–΄μ•Ό** ν•λ‹¤.
- μ£Όλ΅ **μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ, μ†λ©Έμ λ™μ‘μ„ λ³΄μ¥**ν•κΈ° μ„ν•΄ μ‚¬μ©

### π“ μμ κ°€μƒ ν•¨μμ μ©λ„

| μ©λ„             | μ„¤λ…                                                      |
| ---------------- | --------------------------------------------------------- |
| μ¶”μƒ ν΄λμ¤ μ„¤κ³„ | κ³µν†µ μΈν„°νμ΄μ¤λ§ μ •μν•κ³ , κµ¬ν„μ€ νμƒ ν΄λμ¤μ— μ„μ„     |
| μΈν„°νμ΄μ¤ μ—­ν•   | Java, C#μ interfaceμ™€ μ μ‚¬ν• μ„¤κ³„ λ°©μ‹                   |
| λ‹¤ν•μ„± κΈ°λ° μ„¤κ³„ | `Base*` ν¬μΈν„°λ΅ λ‹¤μ–‘ν• νμƒ ν΄λμ¤ μ²λ¦¬ κ°€λ¥             |
| κ°•μ  μ¤λ²„λΌμ΄λ”©  | νμƒ ν΄λμ¤μ—μ„ κµ¬ν„μ„ κ°•μ ν•κ³ , λ„λ½ μ‹ μ»΄νμΌ μ—λ¬ λ°μƒ |

### π“ μμ‹: μμ κ°€μƒ ν•¨μ κΈ°λ° μΈν„°νμ΄μ¤

```
class Drawable {
public:
    virtual void draw() = 0;
};

class Rectangle : public Drawable {
public:
    void draw() override {
        std::cout << "Drawing rectangle\n";
    }
};

class Triangle : public Drawable {
public:
    void draw() override {
        std::cout << "Drawing triangle\n";
    }
};

void render(Drawable* d) {
    d->draw();
}
```

```
Drawable* d = new Triangle();
render(d);  // μ¶λ ¥: Drawing triangle
```

### β… κ²°λ΅ 

> μμ κ°€μƒ ν•¨μλ” **"μ΄ ν΄λμ¤λ” κµ¬ν„μ΄ μ—†λ‹¤, λ‹¤ν•μ  μΈν„°νμ΄μ¤λ§ μ •μν•λ‹¤"**λΌλ” μλ„λ¥Ό ν‘ν„ν•λ‹¤.
>
> μ΄λ” C++μ—μ„ **μΈν„°νμ΄μ¤(interface) μ„¤κ³„μ ν‘μ¤€μ μΈ λ°©μ‹**μ΄λ©°,
>  νμƒ ν΄λμ¤μ— **κµ¬ν„μ„ κ°•μ ν•¨μΌλ΅μ¨ μ½”λ“ κµ¬μ΅°λ¥Ό λ…ν™•ν κµ¬λ¶„**ν•κ³  **λ‹¤ν•μ„±μ„ κ°•λ ¥ν•κ² μ§€μ›**ν•λ‹¤.
>
> μ‹¤μ λ΅ `std::ostream`, `std::istream`, `std::thread::id` λ“±μ ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬ ν΄λμ¤λ“¤λ„
>  λ‚΄λ¶€μ μΌλ΅ **μμ κ°€μƒ ν•¨μ κΈ°λ°μ μ¶”μƒ μ„¤κ³„**λ¥Ό ν™μ©ν•λ‹¤.

## μ¶”μƒ ν΄λμ¤

C++μ—μ„ **μ¶”μƒ ν΄λμ¤(abstract class)**λ” **ν•λ‚ μ΄μƒμ μμ κ°€μƒ ν•¨μ(pure virtual function)λ¥Ό ν¬ν•¨ν• ν΄λμ¤**λ‹¤.
 μ΄ ν΄λμ¤λ” **μ§μ ‘ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•  μ μ—†μΌλ©°**,
 **νμƒ ν΄λμ¤μ—μ„ ν•΄λ‹Ή μμ κ°€μƒ ν•¨μλ¥Ό λ°λ“μ‹ κµ¬ν„(override)**ν•΄μ•Ό ν•λ‹¤.

### β… μ •μ

```
class AbstractClass {
public:
    virtual void doSomething() = 0;  // μμ κ°€μƒ ν•¨μ β†’ μ¶”μƒ ν΄λμ¤κ°€ λ¨
};
```

- μμ κ°€μƒ ν•¨μ(`= 0`)κ°€ ν¬ν•¨λμ–΄ μμΌλ©΄ **ν•΄λ‹Ή ν΄λμ¤λ” μ¶”μƒ ν΄λμ¤**
- **μƒμ„± λ¶κ°€**: `AbstractClass obj;` β†’ μ»΄νμΌ μ¤λ¥ λ°μƒ

### β… νΉμ§• μ”μ•½

| ν•­λ©                     | μ„¤λ…                                                         |
| ------------------------ | ------------------------------------------------------------ |
| μμ κ°€μƒ ν•¨μ ν¬ν•¨ μ—¬λ¶€ | **1κ° μ΄μƒ ν¬ν•¨λλ©΄ μ¶”μƒ ν΄λμ¤**                            |
| μΈμ¤ν„΄μ¤ν™” κ°€λ¥ μ—¬λ¶€     | β μ§μ ‘ κ°μ²΄ μƒμ„± λ¶κ°€                                        |
| νμƒ ν΄λμ¤ μ”κµ¬μ‚¬ν•­     | β… μμ κ°€μƒ ν•¨μλ¥Ό **λ¨λ‘ κµ¬ν„ν•΄μ•Ό μΈμ¤ν„΄μ¤ν™” κ°€λ¥**         |
| λ‹¤ν•μ„± μ‚¬μ© κ°€λ¥ μ—¬λ¶€    | β… κΈ°λ° ν΄λμ¤ ν¬μΈν„°λ΅ νμƒ κ°μ²΄ μ΅°μ‘ κ°€λ¥ (`virtual` λ©”μ»¤λ‹μ¦) |
| μΈν„°νμ΄μ¤ μ—­ν•           | β… Java, C#μ μΈν„°νμ΄μ¤μ™€ μ μ‚¬ν• κΈ°λ¥                        |

#### π“ μμ 

```
class Shape {
public:
    virtual void draw() = 0;     // μμ κ°€μƒ ν•¨μ
    virtual ~Shape() {}          // κ°€μƒ μ†λ©Έμ (λ‹¤ν•μ„± μ•μ „μ„ μ„ν•΄ κ¶μ¥)
};
```

```
class Circle : public Shape {
public:
    void draw() override {
        std::cout << "Drawing Circle\n";
    }
};
```

```
Shape* s = new Circle();
s->draw();  // μ¶λ ¥: Drawing Circle
```

- `Shape`λ” μ¶”μƒ ν΄λμ¤
- `Circle`μ€ `Shape::draw()`λ¥Ό κµ¬ν„ν–μΌλ―€λ΅ κ°μ²΄ μƒμ„± κ°€λ¥

### π“ μμ κ°€μƒ ν•¨μκ°€ μ—¬λ¬ κ°μΌ μλ„ μμ

```
class Interface {
public:
    virtual void start() = 0;
    virtual void stop() = 0;
    virtual ~Interface() {}
};
```

- κµ¬ν„ν•μ§€ μ•μΌλ©΄ νμƒ ν΄λμ¤λ„ μ¶”μƒ ν΄λμ¤κ°€ λ¨

### π“ μ¶”μƒ ν΄λμ¤ μ‚¬μ© λ©μ 

| λ©μ             | μ„¤λ…                                                      |
| --------------- | --------------------------------------------------------- |
| μΈν„°νμ΄μ¤ μ •μ | κ³µν†µ λ™μ‘λ§ μ„ μ–Έν•κ³  κµ¬ν„μ€ νμƒ ν΄λμ¤μ— μ„μ„            |
| λ‹¤ν•μ„± κµ¬ν„     | λ‹¤μ–‘ν• νμƒ ν΄λμ¤μ— λ€ν•΄ κ³µν†µ κΈ°λ° νƒ€μ…μΌλ΅ μ²λ¦¬ κ°€λ¥    |
| κ°•μ  μ¤λ²„λΌμ΄λ”© | ν•¨μ μ¬μ •μλ¥Ό **μ»΄νμΌ μ‹μ μ— κ°•μ **ν•  μ μμ            |
| μ„¤κ³„ λ…ν™•ν™”     | "μ΄ ν΄λμ¤λ” μ¶”μƒμ  κ°λ…μ΄λ‹¤"λΌλ” μλ―Έλ¥Ό μ½”λ“μ— ν‘ν„ κ°€λ¥ |

### β… μμ κ°€μƒ μ†λ©Έμμ™€ μ¶”μƒ ν΄λμ¤

```
class AbstractBase {
public:
    virtual ~AbstractBase() = 0;  // μμ κ°€μƒ μ†λ©Έμ
};

AbstractBase::~AbstractBase() {
    std::cout << "AbstractBase destructor\n";
}
```

- μμ κ°€μƒ μ†λ©Έμλ„ λ°λ“μ‹ **μ •μ ν•„μ”**
- λ‹¤ν•μ„± μ‚­μ λ¥Ό μ•μ „ν•κ² μ²λ¦¬ν•κΈ° μ„ν•΄ μ‚¬μ©λ¨

### π“ μ‹¤μ „ μ‚¬μ© μ: μ „λµ ν¨ν„΄, μΈν„°νμ΄μ¤ μ„¤κ³„

```
class Compressor {
public:
    virtual void compress(const std::string& file) = 0;
};

class ZipCompressor : public Compressor {
public:
    void compress(const std::string& file) override {
        std::cout << "Compressing with ZIP: " << file << "\n";
    }
};

class RarCompressor : public Compressor {
public:
    void compress(const std::string& file) override {
        std::cout << "Compressing with RAR: " << file << "\n";
    }
};
```

### β… μ •λ¦¬

| κµ¬λ¶„             | λ‚΄μ©                                                        |
| ---------------- | ----------------------------------------------------------- |
| μ •μ μ΅°κ±΄        | ν•λ‚ μ΄μƒμ `virtual ν•¨μ = 0` ν¬ν•¨                         |
| κ°μ²΄ μƒμ„±        | β λ¶κ°€ (μΈμ¤ν„΄μ¤ν™” κΈμ§€)                                    |
| νμƒ ν΄λμ¤ μ—­ν•  | λ¨λ“  μμ κ°€μƒ ν•¨μ κµ¬ν„ β†’ κµ¬μ²΄ ν΄λμ¤(concrete class) κ°€λ¥ |
| μ‚¬μ© λ©μ         | μΈν„°νμ΄μ¤ μ„ μ–Έ, λ‹¤ν•μ„±, μ½”λ“ κµ¬μ΅° λ…ν™•ν™”, ν™•μ¥μ„± ν™•λ³΄ λ“±   |

### β… κ²°λ΅ 

> **μ¶”μƒ ν΄λμ¤λ” β€λ¬΄μ—‡μ„ ν•΄μ•Ό ν•λ”μ§€β€λ” μ •μν•μ§€λ§, β€μ–΄λ–»κ² ν• μ§€β€λ” νμƒ ν΄λμ¤μ— λ§΅κΈ°λ” κµ¬μ΅°λ‹¤.**
>
> μ΄λ” C++μ κ°•λ ¥ν• **λ‹¤ν•μ„±(polymorphism)**κ³Ό **μΈν„°νμ΄μ¤ μ„¤κ³„**λ¥Ό μ‹¤ν„ν•λ” ν•µμ‹¬ λ„κµ¬λ΅,
>  λ‹¤μ–‘ν• νμƒ ν΄λμ¤λ“¤μ΄ **κ³µν†µλ μΈν„°νμ΄μ¤λ¥Ό κ³µμ ν•λ©΄μ„λ„ κ°μμ λ°©μ‹μΌλ΅ κµ¬ν„**ν•  μ μλ„λ΅ ν•΄μ¤€λ‹¤.
>
> λ”°λΌμ„, **ν”„λ μ„μ›ν¬ μ„¤κ³„**, **μ „λµ ν¨ν„΄**, **μμ΅΄μ„± μ—­μ „ μ›μΉ™**μ„ κµ¬ν„ν•  λ• ν•µμ‹¬μ μΈ μ—­ν• μ„ ν•λ‹¤.