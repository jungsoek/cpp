# 17. íŒŒì¼ ì…ì¶œë ¥

## `<fstream>`, `<ifstream>`, `<ofstream>`

C++ì—ì„œ íŒŒì¼ì„ ì½ê³  ì“°ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ í´ë˜ìŠ¤ëŠ” `<fstream>` í—¤ë”ì— ì •ì˜ë˜ì–´ ìˆìœ¼ë©°,
 ê¸°ë³¸ì ìœ¼ë¡œ **`std::istream` / `std::ostream`ì˜ íŒŒì¼ ë²„ì „**ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤.

### 1. í—¤ë” ì •ì˜

```
#include <fstream>
```

ì´ í—¤ë”ì—ëŠ” ë‹¤ìŒì˜ ì„¸ ê°€ì§€ ì£¼ìš” í´ë˜ìŠ¤ê°€ í¬í•¨ëœë‹¤:

| í´ë˜ìŠ¤          | ìƒì† ê´€ê³„       | ì—­í•                                |
| --------------- | --------------- | ---------------------------------- |
| `std::ifstream` | `std::istream`  | **íŒŒì¼ ì…ë ¥ ìŠ¤íŠ¸ë¦¼** (ì½ê¸° ì „ìš©)   |
| `std::ofstream` | `std::ostream`  | **íŒŒì¼ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼** (ì“°ê¸° ì „ìš©)   |
| `std::fstream`  | `std::iostream` | **ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼** (ì½ê¸°/ì“°ê¸° ëª¨ë‘) |

### 2. `std::ifstream` â€“ ì…ë ¥ íŒŒì¼ ìŠ¤íŠ¸ë¦¼

#### ê°œìš”

`std::ifstream`ì€ **íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ë“¤ì´ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ìŠ¤íŠ¸ë¦¼ í´ë˜ìŠ¤**ì´ë‹¤.

#### ìƒì„± ë° ì‚¬ìš© ì˜ˆ

```
#include <fstream>
#include <string>

int main() {
    std::ifstream file("input.txt");  // íŒŒì¼ ì—´ê¸°
    if (!file.is_open()) {
        std::cerr << "íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨\n";
        return 1;
    }

    std::string line;
    while (std::getline(file, line)) {
        std::cout << line << '\n';
    }

    file.close();  // íŒŒì¼ ë‹«ê¸° (ìë™ í˜¸ì¶œë˜ì§€ë§Œ ëª…ì‹œ ê°€ëŠ¥)
}
```

#### ì£¼ìš” ë©”ì„œë“œ

| í•¨ìˆ˜                | ì„¤ëª…                            |
| ------------------- | ------------------------------- |
| `.open("filename")` | íŒŒì¼ ì—´ê¸°                       |
| `.close()`          | íŒŒì¼ ë‹«ê¸°                       |
| `.is_open()`        | íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì—´ë ¸ëŠ”ì§€ í™•ì¸ |
| `.eof()`            | íŒŒì¼ ëì— ë„ë‹¬í–ˆëŠ”ì§€ í™•ì¸       |
| `.fail()`           | ì½ê¸° ì‹¤íŒ¨ ì—¬ë¶€ í™•ì¸             |

### 3. `std::ofstream` â€“ ì¶œë ¥ íŒŒì¼ ìŠ¤íŠ¸ë¦¼

#### ê°œìš”

`std::ofstream`ì€ **íŒŒì¼ë¡œ ë°ì´í„°ë¥¼ ì¶œë ¥(ì“°ê¸°)** í•˜ê¸° ìœ„í•œ ìŠ¤íŠ¸ë¦¼ í´ë˜ìŠ¤ì´ë‹¤.

#### ì‚¬ìš© ì˜ˆ

```
#include <fstream>

int main() {
    std::ofstream file("output.txt");
    if (!file) {
        std::cerr << "íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨\n";
        return 1;
    }

    file << "Hello, file!\n";
    file << 123 << ' ' << 3.14;

    file.close();
}
```

#### ì—´ê¸° ëª¨ë“œ ì˜ˆì‹œ

| ëª¨ë“œ               | ì„¤ëª…                                              |
| ------------------ | ------------------------------------------------- |
| `std::ios::out`    | ì“°ê¸° (ê¸°ë³¸ê°’)                                     |
| `std::ios::app`    | ê¸°ì¡´ íŒŒì¼ì— ì´ì–´ì“°ê¸° (append)                     |
| `std::ios::trunc`  | ê¸°ì¡´ ë‚´ìš©ì„ ì œê±°í•˜ê³  ìƒˆë¡œ ì”€ (ê¸°ë³¸ê°’ê³¼ í•¨ê»˜ ë™ì‘) |
| `std::ios::binary` | ë°”ì´ë„ˆë¦¬ ëª¨ë“œë¡œ ì—´ê¸°                              |

```
std::ofstream file("data.bin", std::ios::binary | std::ios::out);
```

### 4. `std::fstream` â€“ ì–‘ë°©í–¥ íŒŒì¼ ìŠ¤íŠ¸ë¦¼

#### ê°œìš”

`std::fstream`ì€ **ì…ë ¥ê³¼ ì¶œë ¥ì„ ëª¨ë‘ ì§€ì›í•˜ëŠ” íŒŒì¼ ìŠ¤íŠ¸ë¦¼**ì´ë‹¤.

#### ì‚¬ìš© ì˜ˆ

```
#include <fstream>
#include <string>

int main() {
    std::fstream file("data.txt", std::ios::in | std::ios::out);
    if (!file) {
        std::cerr << "íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨\n";
        return 1;
    }

    std::string str;
    file >> str;           // ì½ê¸°
    file << "\nì¶”ê°€ë‚´ìš©";   // ì“°ê¸°

    file.close();
}
```

> ì–‘ë°©í–¥ ìŠ¤íŠ¸ë¦¼ ì‚¬ìš© ì‹œ ë°˜ë“œì‹œ `std::ios::in | std::ios::out`ì²˜ëŸ¼ ëª¨ë“œë¥¼ ëª…ì‹œí•´ì•¼ í•œë‹¤.

### 5. íŒŒì¼ ìŠ¤íŠ¸ë¦¼ ì—´ê¸° ëª¨ë“œ

```
std::ios::in        // ì½ê¸° ì „ìš©
std::ios::out       // ì“°ê¸° ì „ìš©
std::ios::app       // íŒŒì¼ ëì— ì¶”ê°€
std::ios::trunc     // ê¸°ì¡´ ë‚´ìš© ì‚­ì œ í›„ ìƒˆë¡œ ì‘ì„±
std::ios::binary    // ë°”ì´ë„ˆë¦¬ ëª¨ë“œ
std::ios::ate       // ì—´ìë§ˆì íŒŒì¼ ëìœ¼ë¡œ ì´ë™
```

- ì—¬ëŸ¬ ëª¨ë“œë¥¼ `|` ì—°ì‚°ìë¡œ ê²°í•© ê°€ëŠ¥
- í…ìŠ¤íŠ¸ íŒŒì¼ì˜ ê²½ìš° ë°”ì´ë„ˆë¦¬ ëª¨ë“œëŠ” ìƒëµ ê°€ëŠ¥

### 6. ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì…ì¶œë ¥ ì˜ˆì‹œ

```
#include <fstream>

int main() {
    int data = 12345;

    // ì“°ê¸°
    std::ofstream out("binary.dat", std::ios::binary);
    out.write(reinterpret_cast<char*>(&data), sizeof(data));
    out.close();

    // ì½ê¸°
    int readData;
    std::ifstream in("binary.dat", std::ios::binary);
    in.read(reinterpret_cast<char*>(&readData), sizeof(readData));
    in.close();

    std::cout << "ì½ì€ ê°’: " << readData << '\n';
}
```

### âœ… ìš”ì•½ ë¹„êµí‘œ

| í´ë˜ìŠ¤          | ê¸°ëŠ¥                      | ê¸°ë³¸ ì—´ê¸° ëª¨ë“œ  | ìƒì†           |
| --------------- | ------------------------- | --------------- | -------------- |
| `std::ifstream` | ì…ë ¥ ìŠ¤íŠ¸ë¦¼ (ì½ê¸°)        | `std::ios::in`  | `std::istream` |
| `std::ofstream` | ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ (ì“°ê¸°)        | `std::ios::out` | `std::ostream` |
| `std::fstream`  | ì–‘ë°©í–¥ ìŠ¤íŠ¸ë¦¼ (ì½ê¸°/ì“°ê¸°) | `std::ios::in   | out`           |

### ğŸ§© íŒ

- ìŠ¤íŠ¸ë¦¼ ê°ì²´ëŠ” ì†Œë©¸ìì—ì„œ `.close()`ë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•˜ë¯€ë¡œ, `RAII`ê°€ ì ìš©ëœë‹¤.
- `.fail()` ë° `.eof()`ë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ì—¬ ì˜¤ë¥˜ ë° íŒŒì¼ ìƒíƒœë¥¼ ì ê²€í•˜ëŠ” ê²ƒì´ ê¶Œì¥ëœë‹¤.
- STL ì»¨í…Œì´ë„ˆì™€ í•¨ê»˜ íŒŒì¼ ì…ì¶œë ¥ì„ ì‚¬ìš©í•  ê²½ìš° ë°˜ë³µì ê¸°ë°˜ ì ‘ê·¼ì„ ì¡°í•©í•  ìˆ˜ ìˆë‹¤.

## í…ìŠ¤íŠ¸ íŒŒì¼ê³¼ ë°”ì´ë„ˆë¦¬ íŒŒì¼

### 1. ì •ì˜

| ì¢…ë¥˜              | ì„¤ëª…                                                         |
| ----------------- | ------------------------------------------------------------ |
| **í…ìŠ¤íŠ¸ íŒŒì¼**   | ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” **ë¬¸ì ê¸°ë°˜** ë°ì´í„° ì €ì¥ (ASCII, UTF-8 ë“±) |
| **ë°”ì´ë„ˆë¦¬ íŒŒì¼** | ì‚¬ëŒì´ ì½ì„ ìˆ˜ ì—†ëŠ” **ì´ì§„ í˜•ì‹**ìœ¼ë¡œ ë°ì´í„° ì €ì¥ (ë©”ëª¨ë¦¬ ìƒíƒœ ê·¸ëŒ€ë¡œ ì €ì¥) |

### 2. ì£¼ìš” ì°¨ì´ì 

| í•­ëª©                   | í…ìŠ¤íŠ¸ íŒŒì¼ (`std::ios::in`, `std::ios::out`) | ë°”ì´ë„ˆë¦¬ íŒŒì¼ (`std::ios::binary`) |
| ---------------------- | --------------------------------------------- | ---------------------------------- |
| ë°ì´í„° í‘œí˜„            | ë¬¸ìë¡œ ì¸ì½”ë”©ëœ ë°ì´í„°                        | ì´ì§„ ë°ì´í„° (raw memory)           |
| ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ”ê°€? | ì˜ˆ (Notepad ë“±ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥)                 | ì•„ë‹ˆì˜¤                             |
| ê°œí–‰ ì²˜ë¦¬ (`\n`)       | OSì— ë”°ë¼ ìë™ ë³€í™˜ë¨                         | ìë™ ë³€í™˜ ì—†ìŒ                     |
| í¬ê¸°                   | ì‘ìŒ (ë¬¸ì ë‹¨ìœ„ ì €ì¥)                         | í¼ (ë©”ëª¨ë¦¬ ê·¸ëŒ€ë¡œ ì €ì¥)            |
| í”Œë«í¼ ì˜ì¡´ì„±          | ë‹¤ì†Œ ìˆìŒ (ê°œí–‰ ë¬¸ì ë“±)                      | ë‚®ìŒ (í‘œì¤€í™” ê°€ëŠ¥)                 |
| ìš©ë„                   | ë¡œê·¸, ì„¤ì • íŒŒì¼, CSV, XML ë“±                  | ì´ë¯¸ì§€, ì˜¤ë””ì˜¤, êµ¬ì¡°ì²´ ì €ì¥ ë“±     |

### 3. í…ìŠ¤íŠ¸ íŒŒì¼ ì…ì¶œë ¥ ì˜ˆì œ

```
#include <fstream>
#include <string>

int main() {
    std::ofstream out("sample.txt");
    out << "Hello, World!\n123\n";
    out.close();

    std::ifstream in("sample.txt");
    std::string line;
    while (std::getline(in, line)) {
        std::cout << "ì½ì€ ì¤„: " << line << '\n';
    }
    in.close();
}
```

- ì¤„ ë‹¨ìœ„ë¡œ í…ìŠ¤íŠ¸ë¥¼ ì½ê³  ì“¸ ìˆ˜ ìˆìŒ
- ê°œí–‰ ë¬¸ì(`\n`)ëŠ” Windowsì—ì„œëŠ” `\r\n`ìœ¼ë¡œ ë³€í™˜ë  ìˆ˜ ìˆìŒ

### 4. ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì…ì¶œë ¥ ì˜ˆì œ

```
#include <fstream>
#include <iostream>

struct Record {
    int id;
    double score;
};

int main() {
    Record r1 = {1, 95.5};

    // ì“°ê¸°
    std::ofstream out("data.bin", std::ios::binary);
    out.write(reinterpret_cast<char*>(&r1), sizeof(r1));
    out.close();

    // ì½ê¸°
    Record r2;
    std::ifstream in("data.bin", std::ios::binary);
    in.read(reinterpret_cast<char*>(&r2), sizeof(r2));
    in.close();

    std::cout << "ì½ì€ ë°ì´í„°: ID=" << r2.id << ", Score=" << r2.score << '\n';
}
```

- êµ¬ì¡°ì²´ ë‹¨ìœ„ë¡œ ë©”ëª¨ë¦¬ ê·¸ëŒ€ë¡œ íŒŒì¼ì— ì €ì¥
- `reinterpret_cast<char*>`ë¥¼ í†µí•´ í¬ì¸í„°ë¥¼ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ë³€í™˜
- í…ìŠ¤íŠ¸ ì¸ì½”ë”© ì²˜ë¦¬ ì—†ìŒ â†’ **ì •í™•í•œ ë°”ì´íŠ¸ ìˆ˜ì™€ ìˆœì„œê°€ ì¤‘ìš”**

### 5. ê°œí–‰ ì²˜ë¦¬ ì°¨ì´

| ìš´ì˜ì²´ì œ       | í…ìŠ¤íŠ¸ íŒŒì¼ì˜ ê°œí–‰ ì²˜ë¦¬ ë°©ì‹ |
| -------------- | ---------------------------- |
| Windows        | `\r\n` (CR+LF) â†’ ìë™ ë³€í™˜ë¨ |
| Unix/Linux     | `\n` (LF)                    |
| macOS (êµ¬ë²„ì „) | `\r` (CR)                    |

- í…ìŠ¤íŠ¸ ëª¨ë“œì—ì„œëŠ” ê°œí–‰ì´ OSë³„ë¡œ **ìë™ ë³€í™˜**ë˜ì§€ë§Œ,
   ë°”ì´ë„ˆë¦¬ ëª¨ë“œì—ì„œëŠ” **ë³€í™˜ ì—†ì´ ê·¸ëŒ€ë¡œ ì €ì¥ë¨**
   â†’ ë”°ë¼ì„œ ì´ì‹ì„±ì´ ìš”êµ¬ë˜ëŠ” ê²½ìš°ì—ëŠ” ë°”ì´ë„ˆë¦¬ ëª¨ë“œ ì‚¬ìš© ì‹œ ê°œí–‰ ë¬¸ìë„ ëª…ì‹œì ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨

### 6. ì…ì¶œë ¥ ëª¨ë“œ ìš”ì•½

| ìŠ¤íŠ¸ë¦¼ ê°ì²´ | í…ìŠ¤íŠ¸ ëª¨ë“œ ì˜ˆì‹œ                      | ë°”ì´ë„ˆë¦¬ ëª¨ë“œ ì˜ˆì‹œ                              |
| ----------- | ------------------------------------- | ----------------------------------------------- |
| `ifstream`  | `std::ifstream f("a.txt");`           | `std::ifstream f("a.bin", std::ios::binary);`   |
| `ofstream`  | `std::ofstream f("out.txt");`         | `std::ofstream f("out.bin", std::ios::binary);` |
| `fstream`   | `std::fstream f("f.txt", std::ios::in | std::ios::out);`                                |

### âœ… í…ìŠ¤íŠ¸ì™€ ë°”ì´ë„ˆë¦¬ ì„ íƒ ê¸°ì¤€

| ìƒí™©                           | ì¶”ì²œ í˜•ì‹                                             |
| ------------------------------ | ----------------------------------------------------- |
| ì‚¬ëŒì´ ì½ê³  ìˆ˜ì •í•´ì•¼ í•¨        | í…ìŠ¤íŠ¸ íŒŒì¼                                           |
| ë°ì´í„° í¬ê¸° ë˜ëŠ” ì†ë„ê°€ ì¤‘ìš”í•¨ | ë°”ì´ë„ˆë¦¬ íŒŒì¼                                         |
| ì •í˜• êµ¬ì¡°ì²´, ì •ìˆ˜ ë°°ì—´ ì €ì¥    | ë°”ì´ë„ˆë¦¬ íŒŒì¼                                         |
| ë¡œê·¸, ì„¤ì •, ë¬¸ì¥ ë°ì´í„°        | í…ìŠ¤íŠ¸ íŒŒì¼                                           |
| í¬ë¡œìŠ¤ í”Œë«í¼ ë°ì´í„° êµí™˜      | ë°”ì´ë„ˆë¦¬ + ëª…ì‹œì  í¬ë§· ì§€ì • í•„ìš” (ì˜ˆ: JSON, Protobuf) |

### âœ… ì •ë¦¬ ìš”ì•½

| í•­ëª©          | í…ìŠ¤íŠ¸ íŒŒì¼       | ë°”ì´ë„ˆë¦¬ íŒŒì¼    |
| ------------- | ----------------- | ---------------- |
| ê°œí–‰ ì²˜ë¦¬     | ìë™ ë³€í™˜         | ì—†ìŒ             |
| ì‚¬ëŒ ì½ê¸°     | ê°€ëŠ¥              | ë¶ˆê°€ëŠ¥           |
| ì €ì¥ íš¨ìœ¨     | ë‚®ìŒ              | ë†’ìŒ             |
| ë°ì´í„° êµ¬ì¡°í™” | ë¬¸ìì—´ ê¸°ë°˜       | êµ¬ì¡°ì²´/ë²„í¼ ê¸°ë°˜ |
| íŒŒì¼ í¬ê¸°     | ì‘ìŒ              | í¼               |
| í˜¸í™˜ì„±        | OS ê°œí–‰ ë¬¸ì ì˜í–¥ | ëª…ì‹œì  ì²˜ë¦¬ ê°€ëŠ¥ |

## ìŠ¤íŠ¸ë¦¼ ìƒíƒœ í”Œë˜ê·¸ (eof, fail, bad, good)

### 1. ê°œìš”

C++ì˜ ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ í´ë˜ìŠ¤(`std::ifstream`, `std::ofstream`, `std::fstream`)ëŠ” ìŠ¤íŠ¸ë¦¼ì˜ ìƒíƒœë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ **ë‹¤ì¤‘ ìƒíƒœ ë¹„íŠ¸ í”Œë˜ê·¸**ë¥¼ ìœ ì§€í•œë‹¤.
 ì´ ìƒíƒœëŠ” ìŠ¤íŠ¸ë¦¼ì˜ ë‚´ë¶€ ì˜¤ë¥˜ ìƒíƒœ, ë°ì´í„°ì˜ ìœ íš¨ì„±, I/O ì‹¤íŒ¨ ë“±ì„ ë‚˜íƒ€ë‚´ë©°, **ì˜¤ë¥˜ ì²˜ë¦¬ì™€ ë£¨í”„ ì œì–´**ì— ì‚¬ìš©ëœë‹¤.

ì´ëŸ¬í•œ ìƒíƒœëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë©¤ë²„ í•¨ìˆ˜ë“¤ì„ í†µí•´ ì ê²€í•  ìˆ˜ ìˆë‹¤:

### 2. ì£¼ìš” ìŠ¤íŠ¸ë¦¼ ìƒíƒœ í•¨ìˆ˜

| í•¨ìˆ˜     | ì˜ë¯¸                                                        |
| -------- | ----------------------------------------------------------- |
| `eof()`  | **íŒŒì¼ ë(EOF)ì— ë„ë‹¬í–ˆëŠ”ê°€?**                              |
| `fail()` | **ì…ì¶œë ¥ ì‹¤íŒ¨ê°€ ë°œìƒí–ˆëŠ”ê°€?** (í˜• ë³€í™˜ ì‹¤íŒ¨ ë“±)             |
| `bad()`  | **ì‹¬ê°í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ê°€?** (ë””ìŠ¤í¬ ì˜¤ë¥˜, ìŠ¤íŠ¸ë¦¼ ì†ìƒ ë“±) |
| `good()` | **ì •ìƒ ìƒíƒœì¸ê°€?** (ë‹¤ë¥¸ ëª¨ë“  ìƒíƒœê°€ ê±°ì§“ì´ë©´ ì°¸)           |

### 3. ë‚´ë¶€ í”Œë˜ê·¸ ë¹„íŠ¸ (std::ios_base::iostate)

| ìƒíƒœ ë¹„íŠ¸           | ì„¤ëª…                                                |
| ------------------- | --------------------------------------------------- |
| `std::ios::eofbit`  | ì…ë ¥ ìŠ¤íŠ¸ë¦¼ì´ EOFì— ë„ë‹¬í•¨                          |
| `std::ios::failbit` | í˜•ì‹ ì˜¤ë¥˜, ì½ê¸° ì‹¤íŒ¨ (ì˜ˆ: `int`ì— ë¬¸ìì—´ ì½ê¸° ì‹œë„) |
| `std::ios::badbit`  | ì…ì¶œë ¥ ì¤‘ ì‹¬ê°í•œ ì˜¤ë¥˜ (ì¥ì¹˜ ë¬¸ì œ ë“±)                |
| `std::ios::goodbit` | ì˜¤ë¥˜ ì—†ìŒ (ëª¨ë“  ìƒíƒœ ë¹„íŠ¸ê°€ 0)                      |

### 4. ìƒíƒœ í•¨ìˆ˜ ìƒì„¸ ì„¤ëª… ë° ì˜ˆì œ

#### âœ… `eof()` â€“ íŒŒì¼ ë ê°ì§€

```
std::ifstream file("data.txt");
while (!file.eof()) {
    std::string line;
    std::getline(file, line);
    std::cout << line << '\n';
}
```

> â— ì´ ë°©ì‹ì€ **ê¶Œì¥ë˜ì§€ ì•ŠìŒ** â€” `eof()`ëŠ” **íŒŒì¼ ëì„ ë„˜ì€ í›„ì—ì•¼ trueê°€ ë¨**

â¡ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•´ì•¼ ì•ˆì „:

```
while (std::getline(file, line)) {
    // ì •ìƒì ìœ¼ë¡œ í•œ ì¤„ ì½ì€ ê²½ìš°ë§Œ ë£¨í”„
}
```

#### âœ… `fail()` â€“ ì…ë ¥ ì‹¤íŒ¨ (í˜•ì‹ ë¶ˆì¼ì¹˜ ë“±)

```
int x;
std::cin >> x;  // ì‚¬ìš©ìê°€ ìˆ«ì ëŒ€ì‹  ë¬¸ìë¥¼ ì…ë ¥í•˜ë©´ fail ìƒíƒœ ë°œìƒ

if (std::cin.fail()) {
    std::cerr << "í˜•ì‹ ì˜¤ë¥˜: ì •ìˆ˜ê°€ ì•„ë‹˜\n";
}
```

- `fail()`ì€ í˜•ì‹ ì˜¤ë¥˜ ë˜ëŠ” ì—´ê¸° ì‹¤íŒ¨ ì‹œì—ë„ trueë¥¼ ë°˜í™˜í•¨

#### âœ… `bad()` â€“ ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ìŠ¤íŠ¸ë¦¼ ì˜¤ë¥˜

```
std::ifstream file("nonexistent.txt");
if (file.bad()) {
    std::cerr << "íŒŒì¼ ì ‘ê·¼ ì¤‘ ë””ë°”ì´ìŠ¤ ì˜¤ë¥˜ ë°œìƒ\n";
}
```

- ë””ìŠ¤í¬ ì¥ì• , ë²„í¼ ì†ìƒ, ì…ì¶œë ¥ ì˜ˆì™¸ ë“± ë¬¼ë¦¬ì /ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¥¼ ì˜ë¯¸
- `bad()`ëŠ” ë§¤ìš° **ì‹¬ê°í•œ ìƒíƒœ**ì´ë©°, ì¼ë°˜ì ì¸ ì‹¤íŒ¨ë³´ë‹¤ ë†’ì€ ìˆ˜ì¤€ì˜ ì—ëŸ¬ë¡œ ê°„ì£¼ë¨

#### âœ… `good()` â€“ ì•„ë¬´ ë¬¸ì œ ì—†ìŒ

```
std::ifstream file("log.txt");
if (file.good()) {
    std::cout << "íŒŒì¼ ì—´ê¸° ì„±ê³µ\n";
}
```

- `eofbit`, `failbit`, `badbit` ì¤‘ **ì–´ëŠ ê²ƒë„ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ true**

### 5. ìŠ¤íŠ¸ë¦¼ ìƒíƒœ ì¬ì„¤ì •

```
std::cin.clear();            // ìƒíƒœ ë¹„íŠ¸ ì´ˆê¸°í™”
std::cin.ignore(1000, '\n'); // ì˜ëª»ëœ ì…ë ¥ ë¬´ì‹œ
```

- ì…ë ¥ ìŠ¤íŠ¸ë¦¼ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´, **clear()**ë¡œ ìƒíƒœë¥¼ ë³µêµ¬í•œ ë’¤
   `ignore()` ë“±ìœ¼ë¡œ ë‚¨ì€ ë²„í¼ë¥¼ ì œê±°í•´ì•¼ ì¬ì…ë ¥ì´ ê°€ëŠ¥í•´ì§

### 6. ì‹¤ì œ ì…ì¶œë ¥ ë£¨í”„ ì˜ˆì‹œ

```
std::ifstream in("data.txt");
int value;
while (in >> value) {
    std::cout << "ì½ì€ ê°’: " << value << '\n';
}

if (in.eof()) {
    std::cout << "íŒŒì¼ ë ë„ë‹¬\n";
} else if (in.fail()) {
    std::cerr << "í˜•ì‹ ì˜¤ë¥˜ ë°œìƒ\n";
} else if (in.bad()) {
    std::cerr << "ë””ë°”ì´ìŠ¤ ì˜¤ë¥˜ ë°œìƒ\n";
}
```

### âœ… ìš”ì•½ ë¹„êµí‘œ

| í•¨ìˆ˜     | ì„¤ëª…                    | ì„¤ì •ë˜ëŠ” ë‚´ë¶€ ë¹„íŠ¸        | ë°œìƒ ì˜ˆ                         |
| -------- | ----------------------- | ------------------------- | ------------------------------- |
| `eof()`  | íŒŒì¼ ë ë„ë‹¬ ì—¬ë¶€       | `eofbit`                  | ë§ˆì§€ë§‰ ë¬¸ì ì´í›„ ë” ì½ìœ¼ë ¤ ì‹œë„ |
| `fail()` | ì…ë ¥ ì‹¤íŒ¨ ì—¬ë¶€          | `failbit`                 | ìˆ«ì ì…ë ¥ ì‹œ ë¬¸ìì—´ ë°›ìŒ ë“±     |
| `bad()`  | ë¬¼ë¦¬ì /ë…¼ë¦¬ì  ì‹¬ê° ì˜¤ë¥˜ | `badbit`                  | ìŠ¤íŠ¸ë¦¼ ë²„í¼ ì†ìƒ, ë””ìŠ¤í¬ ë¬¸ì œ   |
| `good()` | ì •ìƒ ì—¬ë¶€               | ì—†ìŒ (ëª¨ë“  ìƒíƒœ ë¹„íŠ¸ê°€ 0) | ëª¨ë“  ìƒíƒœê°€ ì–‘í˜¸í•  ë•Œë§Œ true    |

### ğŸ“Œ íŒ

- `eof()`ëŠ” **ë£¨í”„ ì¡°ê±´ìœ¼ë¡œ ë‹¨ë… ì‚¬ìš©í•˜ì§€ ë§ê³ **, ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì˜ ê²°ê³¼ë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨í•  ê²ƒ
- ì˜¤ë¥˜ ë°œìƒ ì‹œì—ëŠ” ë°˜ë“œì‹œ `.clear()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ìŠ¤íŠ¸ë¦¼ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬í•  ê²ƒ
- `bad()`ëŠ” ë³µêµ¬ê°€ ì–´ë ¤ìš´ ì˜¤ë¥˜ì´ë¯€ë¡œ, í•´ë‹¹ ìƒíƒœ ë°œìƒ ì‹œì—ëŠ” ì¢…ë£Œ ë˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ê°€ í•„ìš”

## íŒŒì¼ í¬ì¸í„° ìœ„ì¹˜ ì¡°ì • (seekg, seekp)

### 1. ê°œìš”

C++ì˜ íŒŒì¼ ìŠ¤íŠ¸ë¦¼ì€ **í˜„ì¬ íŒŒì¼ì—ì„œ ì½ê±°ë‚˜ ì“¸ ìœ„ì¹˜**ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ì¶”ì í•˜ê³  ìˆìœ¼ë©°,
 ì´ ìœ„ì¹˜ë¥¼ **íŒŒì¼ í¬ì¸í„°(file position indicator)** ë˜ëŠ” **ì»¤ì„œ(cursor)**ë¼ê³  ë¶€ë¥¸ë‹¤.

| ì—°ì‚° ì¢…ë¥˜  | ì„¤ëª…                  | ì‚¬ìš© í•¨ìˆ˜        |
| ---------- | --------------------- | ---------------- |
| ì…ë ¥(ì½ê¸°) | get pointer ìœ„ì¹˜ ì¡°ì • | `seekg`, `tellg` |
| ì¶œë ¥(ì“°ê¸°) | put pointer ìœ„ì¹˜ ì¡°ì • | `seekp`, `tellp` |

### 2. í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```
istream& seekg(std::streampos pos);                          // ì ˆëŒ€ ìœ„ì¹˜ë¡œ ì´ë™
istream& seekg(std::streamoff off, std::ios_base::seekdir);  // ìƒëŒ€ ìœ„ì¹˜ë¡œ ì´ë™

ostream& seekp(std::streampos pos);
ostream& seekp(std::streamoff off, std::ios_base::seekdir);

std::streampos tellg();  // í˜„ì¬ get ìœ„ì¹˜ ë°˜í™˜
std::streampos tellp();  // í˜„ì¬ put ìœ„ì¹˜ ë°˜í™˜
```

### 3. ê¸°ì¤€ ìœ„ì¹˜ ìƒìˆ˜ (`std::ios_base::seekdir`)

| ìƒìˆ˜            | ì˜ë¯¸                  |
| --------------- | --------------------- |
| `std::ios::beg` | íŒŒì¼ì˜ ì‹œì‘ ìœ„ì¹˜ ê¸°ì¤€ |
| `std::ios::cur` | í˜„ì¬ ìœ„ì¹˜ ê¸°ì¤€        |
| `std::ios::end` | íŒŒì¼ì˜ ë ìœ„ì¹˜ ê¸°ì¤€   |

### 4. ì‚¬ìš© ì˜ˆì œ

#### âœ… 4.1 `seekg` (ì…ë ¥ í¬ì¸í„° ì´ë™)

```
std::ifstream in("data.txt", std::ios::binary);
in.seekg(0, std::ios::end);               // íŒŒì¼ ëìœ¼ë¡œ ì´ë™
std::streampos size = in.tellg();         // íŒŒì¼ í¬ê¸° ì¸¡ì •
in.seekg(0, std::ios::beg);               // ë‹¤ì‹œ íŒŒì¼ ì²˜ìŒìœ¼ë¡œ ì´ë™

std::cout << "íŒŒì¼ í¬ê¸°: " << size << " bytes\n";
```

#### âœ… 4.2 `seekp` (ì¶œë ¥ í¬ì¸í„° ì´ë™)

```
std::ofstream out("log.txt", std::ios::in | std::ios::out | std::ios::binary);
out.seekp(10, std::ios::beg);             // íŒŒì¼ ì‹œì‘ì—ì„œ 10ë°”ì´íŠ¸ í›„ë¡œ ì´ë™
out << "ì‚½ì…ëœ í…ìŠ¤íŠ¸";                    // í•´ë‹¹ ìœ„ì¹˜ì— ë®ì–´ì“°ê¸°
```

### 5. ë°”ì´ë„ˆë¦¬ êµ¬ì¡°ì²´ ìœ„ì¹˜ ì ‘ê·¼ ì˜ˆ

```
struct Record {
    int id;
    double score;
};

std::fstream file("records.dat", std::ios::in | std::ios::out | std::ios::binary);

// ë‘ ë²ˆì§¸ êµ¬ì¡°ì²´ì— ì ‘ê·¼
file.seekg(sizeof(Record) * 1, std::ios::beg);  // 1ë²ˆì§¸ ì¸ë±ìŠ¤ â†’ 2ë²ˆì§¸ í•­ëª©
Record r;
file.read(reinterpret_cast<char*>(&r), sizeof(Record));

std::cout << "ID: " << r.id << ", Score: " << r.score << '\n';
```

### 6. í˜„ì¬ ìœ„ì¹˜ í™•ì¸ (`tellg`, `tellp`)

```
std::ifstream fin("data.txt");
fin.seekg(5);
std::cout << "í˜„ì¬ ì½ê¸° ìœ„ì¹˜: " << fin.tellg() << '\n';
```

- ë°˜í™˜ê°’ì€ `std::streampos` íƒ€ì…ì´ë©°, íŒŒì¼ ë‚´ **ë°”ì´íŠ¸ ìœ„ì¹˜(offset)**ë¥¼ ì˜ë¯¸í•¨
- `tellp()`ë„ ë™ì¼í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥

### 7. ì£¼ì˜ì‚¬í•­

| ì£¼ì˜ì                   | ì„¤ëª…                                                         |
| ----------------------- | ------------------------------------------------------------ |
| í…ìŠ¤íŠ¸ íŒŒì¼ vs ë°”ì´ë„ˆë¦¬ | í…ìŠ¤íŠ¸ íŒŒì¼ì€ ê°œí–‰ ë³€í™˜ ë“±ìœ¼ë¡œ ì¸í•´ **ì •í™•í•œ ë°”ì´íŠ¸ ìœ„ì¹˜ ì˜ˆì¸¡ ë¶ˆê°€** |
| ìŠ¤íŠ¸ë¦¼ ëª¨ë“œ             | `seekp`/`seekg` ì‚¬ìš©í•˜ë ¤ë©´ ë°˜ë“œì‹œ `std::ios::binary`, `std::ios::in/out` ëª…ì‹œ |
| ìœ„ì¹˜ ìŒìˆ˜ ì…ë ¥ ê¸ˆì§€     | ìŒìˆ˜ ì˜¤í”„ì…‹ì€ `std::ios::cur` ë˜ëŠ” `std::ios::end` ê¸°ì¤€ì—ì„œë§Œ ì˜ë¯¸ ìˆìŒ |

### âœ… ìš”ì•½

| í•¨ìˆ˜                 | ëŒ€ìƒ                   | ì„¤ëª…             |
| -------------------- | ---------------------- | ---------------- |
| `seekg(offset, dir)` | `ifstream` / `fstream` | ì…ë ¥ í¬ì¸í„° ì´ë™ |
| `seekp(offset, dir)` | `ofstream` / `fstream` | ì¶œë ¥ í¬ì¸í„° ì´ë™ |
| `tellg()`            | ì…ë ¥ ìœ„ì¹˜ ë°˜í™˜         |                  |
| `tellp()`            | ì¶œë ¥ ìœ„ì¹˜ ë°˜í™˜         |                  |

### ğŸ“Œ íŒŒì¼ í¬ì¸í„° ì‚¬ìš© íŒ¨í„´

- **íŒŒì¼ í¬ê¸° ì¸¡ì •**: `seekg(0, end)` â†’ `tellg()`
- **êµ¬ì¡°ì²´ ë°°ì—´ ì¸ë±ì‹±**: `seekg(sizeof(Struct) * index, beg)`
- **ì¤‘ê°„ ìœ„ì¹˜ ë®ì–´ì“°ê¸°**: `seekp(pos)` í›„ `write()`
- **ì½ê¸° ì¬ì‹œì‘**: `seekg(0)` or `clear(); seekg(0)`